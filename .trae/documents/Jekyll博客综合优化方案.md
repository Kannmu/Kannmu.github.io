# Jekyllåšå®¢ç»¼åˆä¼˜åŒ–æ–¹æ¡ˆ

## 1. é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£é’ˆå¯¹KannmuSite Jekyllåšå®¢é¡¹ç›®æå‡ºç»¼åˆä¼˜åŒ–æ–¹æ¡ˆï¼Œæ—¨åœ¨æå‡ç”¨æˆ·ä½“éªŒã€å¢å¼ºå¤šè¯­è¨€åŠŸèƒ½ã€ä¼˜åŒ–å“åº”å¼è®¾è®¡ï¼Œå¹¶æ¸…ç†ä¸å¿…è¦çš„å†…å®¹ã€‚é¡¹ç›®å½“å‰ä½¿ç”¨Jekyll + Bootstrap 3.x + jQueryæŠ€æœ¯æ ˆï¼Œæ‰˜ç®¡åœ¨GitHub Pagesä¸Šã€‚

## 2. æ ¸å¿ƒåŠŸèƒ½

### 2.1 ç”¨æˆ·è§’è‰²
æœ¬é¡¹ç›®ä¸ºä¸ªäººåšå®¢ï¼Œæ— éœ€å¤æ‚çš„ç”¨æˆ·è§’è‰²åŒºåˆ†ï¼š

| è§’è‰² | è®¿é—®æ–¹å¼ | æ ¸å¿ƒæƒé™ |
|------|----------|----------|
| è®¿å®¢ | ç›´æ¥è®¿é—® | æµè§ˆæ–‡ç« ã€åˆ‡æ¢è¯­è¨€ã€æœç´¢å†…å®¹ |
| åšä¸» | åå°ç®¡ç† | å‘å¸ƒæ–‡ç« ã€ç®¡ç†å†…å®¹ã€é…ç½®è®¾ç½® |

### 2.2 åŠŸèƒ½æ¨¡å—

ä¼˜åŒ–åçš„åšå®¢åŒ…å«ä»¥ä¸‹æ ¸å¿ƒé¡µé¢ï¼š
1. **é¦–é¡µ**ï¼šæ–‡ç« åˆ—è¡¨ã€å¤šè¯­è¨€é€‰æ‹©å™¨ã€å“åº”å¼å¯¼èˆªæ 
2. **æ–‡ç« è¯¦æƒ…é¡µ**ï¼šæ–‡ç« å†…å®¹ã€è¯„è®ºç³»ç»Ÿã€ç›¸å…³æ¨è
3. **å…³äºé¡µé¢**ï¼šä¸ªäººä»‹ç»ã€è”ç³»æ–¹å¼ã€ä½œå“é›†é“¾æ¥
4. **å½’æ¡£é¡µé¢**ï¼šæŒ‰æ—¶é—´/æ ‡ç­¾åˆ†ç±»çš„æ–‡ç« åˆ—è¡¨
5. **æœç´¢é¡µé¢**ï¼šå…¨æ–‡æœç´¢åŠŸèƒ½ã€æœç´¢ç»“æœå±•ç¤º

### 2.3 é¡µé¢è¯¦æƒ…

| é¡µé¢åç§° | æ¨¡å—åç§° | åŠŸèƒ½æè¿° |
|----------|----------|----------|
| é¦–é¡µ | å¯¼èˆªæ  | å“åº”å¼å¯¼èˆªã€å¤šè¯­è¨€é€‰æ‹©å™¨ã€æœç´¢å…¥å£ |
| é¦–é¡µ | æ–‡ç« åˆ—è¡¨ | åˆ†é¡µæ˜¾ç¤ºã€æ‘˜è¦é¢„è§ˆã€å‘å¸ƒæ—¶é—´ |
| é¦–é¡µ | ä¾§è¾¹æ  | æ ‡ç­¾äº‘ã€å‹é“¾ã€ä¸ªäººç®€ä»‹ |
| æ–‡ç« è¯¦æƒ…é¡µ | æ–‡ç« å†…å®¹ | Markdownæ¸²æŸ“ã€ä»£ç é«˜äº®ã€æ•°å­¦å…¬å¼æ”¯æŒ |
| æ–‡ç« è¯¦æƒ…é¡µ | å¤šè¯­è¨€æ”¯æŒ | è‡ªåŠ¨è¯­è¨€æ£€æµ‹ã€æ‰‹åŠ¨åˆ‡æ¢ã€å†…å®¹ç¿»è¯‘ |
| å…³äºé¡µé¢ | ä¸ªäººä»‹ç» | å¤šè¯­è¨€ç‰ˆæœ¬ã€å“åº”å¼å¸ƒå±€ |
| å½’æ¡£é¡µé¢ | æ–‡ç« åˆ†ç±» | æŒ‰æ—¶é—´çº¿æ’åºã€æ ‡ç­¾ç­›é€‰ |
| æœç´¢é¡µé¢ | æœç´¢åŠŸèƒ½ | å®æ—¶æœç´¢ã€ç»“æœé«˜äº®ã€æœç´¢å»ºè®® |

## 3. æ ¸å¿ƒæµç¨‹

### 3.1 ç”¨æˆ·è®¿é—®æµç¨‹
ç”¨æˆ·è®¿é—®åšå®¢æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆæ£€æµ‹ç”¨æˆ·IPåœ°å€ç¡®å®šåœ°ç†ä½ç½®ï¼Œè‡ªåŠ¨è®¾ç½®å¯¹åº”è¯­è¨€ã€‚ç”¨æˆ·å¯é€šè¿‡å¯¼èˆªæ çš„è¯­è¨€é€‰æ‹©å™¨æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€ï¼Œç³»ç»Ÿä¼šè®°ä½ç”¨æˆ·åå¥½å¹¶åœ¨åç»­è®¿é—®ä¸­åº”ç”¨ã€‚

### 3.2 å“åº”å¼é€‚é…æµç¨‹
ç³»ç»Ÿæ ¹æ®è®¾å¤‡å±å¹•å°ºå¯¸è‡ªåŠ¨è°ƒæ•´å¸ƒå±€ï¼šæ¡Œé¢ç«¯æ˜¾ç¤ºå®Œæ•´ä¾§è¾¹æ ï¼Œå¹³æ¿ç«¯æ”¶ç¼©éƒ¨åˆ†å†…å®¹ï¼Œç§»åŠ¨ç«¯é‡‡ç”¨æŠ˜å å¼å¯¼èˆªå’Œå•åˆ—å¸ƒå±€ã€‚

```mermaid
graph TD
    A[ç”¨æˆ·è®¿é—®] --> B[IPåœ°ç†ä½ç½®æ£€æµ‹]
    B --> C[è‡ªåŠ¨è¯­è¨€è®¾ç½®]
    C --> D[è®¾å¤‡ç±»å‹æ£€æµ‹]
    D --> E[å“åº”å¼å¸ƒå±€åŠ è½½]
    E --> F[å†…å®¹æ¸²æŸ“]
    F --> G[ç”¨æˆ·äº¤äº’]
    G --> H[è¯­è¨€åˆ‡æ¢]
    H --> I[åå¥½ä¿å­˜]
```

## 4. ç”¨æˆ·ç•Œé¢è®¾è®¡

### 4.1 è®¾è®¡é£æ ¼
- **ä¸»è‰²è°ƒ**ï¼šæ·±è“è‰²(#337ab7)ã€ç™½è‰²(#ffffff)
- **è¾…åŠ©è‰²**ï¼šç°è‰²(#777777)ã€æµ…ç°è‰²(#f5f5f5)
- **æŒ‰é’®æ ·å¼**ï¼šåœ†è§’è®¾è®¡ã€æ‚¬åœæ•ˆæœã€æ¸å˜èƒŒæ™¯
- **å­—ä½“**ï¼šä¸­æ–‡ä½¿ç”¨å¾®è½¯é›…é»‘ï¼Œè‹±æ–‡ä½¿ç”¨Helvetica Neue
- **å¸ƒå±€é£æ ¼**ï¼šå¡ç‰‡å¼è®¾è®¡ã€é¡¶éƒ¨å›ºå®šå¯¼èˆª
- **å›¾æ ‡é£æ ¼**ï¼šFont Awesomeå›¾æ ‡åº“ã€SVGå›½æ——å›¾æ ‡

### 4.2 é¡µé¢è®¾è®¡æ¦‚è§ˆ

| é¡µé¢åç§° | æ¨¡å—åç§° | UIå…ƒç´  |
|----------|----------|--------|
| å¯¼èˆªæ  | å¤šè¯­è¨€é€‰æ‹©å™¨ | ä¸‹æ‹‰èœå•ã€å›½æ——å›¾æ ‡ã€å¹³æ»‘åŠ¨ç”»ã€å“åº”å¼è®¾è®¡ |
| å¯¼èˆªæ  | æœç´¢åŠŸèƒ½ | æœç´¢å›¾æ ‡ã€å±•å¼€å¼æœç´¢æ¡†ã€å®æ—¶å»ºè®® |
| é¦–é¡µ | æ–‡ç« å¡ç‰‡ | é˜´å½±æ•ˆæœã€æ‚¬åœåŠ¨ç”»ã€æ ‡ç­¾æ ‡è¯†ã€é˜…è¯»æ—¶é—´ |
| ä¾§è¾¹æ  | æ ‡ç­¾äº‘ | å½©è‰²æ ‡ç­¾ã€å¤§å°æƒé‡ã€ç‚¹å‡»æ•ˆæœ |
| æ–‡ç« é¡µ | ç›®å½•å¯¼èˆª | å›ºå®šä½ç½®ã€æ»šåŠ¨é«˜äº®ã€å¹³æ»‘è·³è½¬ |

### 4.3 å“åº”å¼è®¾è®¡
- **æ¡Œé¢ä¼˜å…ˆ**ï¼šåŸºç¡€è®¾è®¡é’ˆå¯¹1200px+å±å¹•
- **å¹³æ¿é€‚é…**ï¼š768px-1199pxä½¿ç”¨ä¸­ç­‰å¸ƒå±€
- **ç§»åŠ¨é€‚é…**ï¼š<768pxé‡‡ç”¨å•åˆ—å¸ƒå±€
- **è§¦æ‘¸ä¼˜åŒ–**ï¼šå¢å¤§ç‚¹å‡»åŒºåŸŸã€ä¼˜åŒ–æ‰‹åŠ¿æ“ä½œ

## 5. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 5.1 å¤šè¯­è¨€åŠŸèƒ½å®Œå–„

#### 5.1.1 IPåœ°å€è‡ªåŠ¨è¯­è¨€æ£€æµ‹
```javascript
// IPåœ°ç†ä½ç½®æ£€æµ‹å®ç°
class LanguageDetector {
    constructor() {
        this.apiEndpoints = [
            'https://ipapi.co/json/',
            'https://ipinfo.io/json',
            'https://api.ipgeolocation.io/ipgeo?apiKey=YOUR_KEY'
        ];
        this.languageMap = {
            'CN': 'chinese_simplified',
            'TW': 'chinese_traditional', 
            'HK': 'chinese_traditional',
            'US': 'english',
            'GB': 'english',
            'FR': 'french',
            'DE': 'german',
            'JP': 'japanese',
            'KR': 'korean',
            'ES': 'spanish',
            'RU': 'russian'
        };
    }

    async detectLanguage() {
        // æ£€æŸ¥æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·åå¥½
        const savedLang = localStorage.getItem('preferred_language');
        if (savedLang) return savedLang;

        // IPæ£€æµ‹é™çº§ç­–ç•¥
        for (const endpoint of this.apiEndpoints) {
            try {
                const response = await fetch(endpoint);
                const data = await response.json();
                const countryCode = data.country_code || data.country;
                return this.languageMap[countryCode] || 'english';
            } catch (error) {
                console.warn(`IPæ£€æµ‹å¤±è´¥: ${endpoint}`, error);
            }
        }

        // æµè§ˆå™¨è¯­è¨€å¤‡é€‰æ–¹æ¡ˆ
        const browserLang = navigator.language.toLowerCase();
        if (browserLang.includes('zh-cn')) return 'chinese_simplified';
        if (browserLang.includes('zh-tw')) return 'chinese_traditional';
        if (browserLang.includes('ja')) return 'japanese';
        if (browserLang.includes('ko')) return 'korean';
        if (browserLang.includes('fr')) return 'french';
        if (browserLang.includes('de')) return 'german';
        if (browserLang.includes('es')) return 'spanish';
        if (browserLang.includes('ru')) return 'russian';
        
        return 'english'; // é»˜è®¤è¯­è¨€
    }
}
```

#### 5.1.2 ä¼˜åŒ–è¯­è¨€é€‰æ‹©å™¨UI
```html
<!-- æ–°çš„å¤šè¯­è¨€é€‰æ‹©å™¨è®¾è®¡ -->
<div class="language-selector-container">
    <div class="language-selector" id="languageSelector">
        <button class="language-btn" id="currentLanguage">
            <span class="flag-icon" id="currentFlag">ğŸ‡ºğŸ‡¸</span>
            <span class="language-text" id="currentLangText">English</span>
            <i class="fa fa-chevron-down"></i>
        </button>
        <div class="language-dropdown" id="languageDropdown">
            <div class="language-option" data-lang="english" data-flag="ğŸ‡ºğŸ‡¸">
                <span class="flag-icon">ğŸ‡ºğŸ‡¸</span>
                <span class="language-name">English</span>
            </div>
            <div class="language-option" data-lang="chinese_simplified" data-flag="ğŸ‡¨ğŸ‡³">
                <span class="flag-icon">ğŸ‡¨ğŸ‡³</span>
                <span class="language-name">ç®€ä½“ä¸­æ–‡</span>
            </div>
            <div class="language-option" data-lang="chinese_traditional" data-flag="ğŸ‡¹ğŸ‡¼">
                <span class="flag-icon">ğŸ‡¹ğŸ‡¼</span>
                <span class="language-name">ç¹é«”ä¸­æ–‡</span>
            </div>
            <div class="language-option" data-lang="japanese" data-flag="ğŸ‡¯ğŸ‡µ">
                <span class="flag-icon">ğŸ‡¯ğŸ‡µ</span>
                <span class="language-name">æ—¥æœ¬èª</span>
            </div>
            <div class="language-option" data-lang="french" data-flag="ğŸ‡«ğŸ‡·">
                <span class="flag-icon">ğŸ‡«ğŸ‡·</span>
                <span class="language-name">FranÃ§ais</span>
            </div>
            <div class="language-option" data-lang="spanish" data-flag="ğŸ‡ªğŸ‡¸">
                <span class="flag-icon">ğŸ‡ªğŸ‡¸</span>
                <span class="language-name">EspaÃ±ol</span>
            </div>
            <div class="language-option" data-lang="russian" data-flag="ğŸ‡·ğŸ‡º">
                <span class="flag-icon">ğŸ‡·ğŸ‡º</span>
                <span class="language-name">Ğ ÑƒÑÑĞºĞ¸Ğ¹</span>
            </div>
        </div>
    </div>
</div>
```

#### 5.1.3 CSSæ ·å¼ä¼˜åŒ–
```css
/* å¤šè¯­è¨€é€‰æ‹©å™¨æ ·å¼ */
.language-selector-container {
    position: relative;
    display: inline-block;
    margin-left: 15px;
}

.language-selector {
    position: relative;
    z-index: 1000;
}

.language-btn {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 6px;
    color: #fff;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
    min-width: 120px;
}

.language-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.5);
    transform: translateY(-1px);
}

.flag-icon {
    font-size: 16px;
    margin-right: 8px;
}

.language-text {
    flex: 1;
    text-align: left;
}

.language-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    z-index: 1001;
    max-height: 300px;
    overflow-y: auto;
}

.language-dropdown.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.language-option {
    display: flex;
    align-items: center;
    padding: 10px 12px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    color: #333;
}

.language-option:hover {
    background-color: #f8f9fa;
}

.language-option.active {
    background-color: #e3f2fd;
    color: #1976d2;
}

.language-name {
    margin-left: 8px;
    font-size: 14px;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .language-btn {
        min-width: 100px;
        padding: 6px 10px;
        font-size: 13px;
    }
    
    .language-text {
        display: none;
    }
    
    .flag-icon {
        margin-right: 4px;
    }
}

/* æ·±è‰²æ¨¡å¼æ”¯æŒ */
@media (prefers-color-scheme: dark) {
    .language-dropdown {
        background: #2d3748;
        border-color: #4a5568;
        color: #e2e8f0;
    }
    
    .language-option {
        color: #e2e8f0;
    }
    
    .language-option:hover {
        background-color: #4a5568;
    }
    
    .language-option.active {
        background-color: #3182ce;
        color: #fff;
    }
}

/* é«˜å¯¹æ¯”åº¦æ¨¡å¼ */
@media (prefers-contrast: high) {
    .language-btn {
        border-width: 2px;
    }
    
    .language-dropdown {
        border-width: 2px;
    }
}

/* å‡å°‘åŠ¨ç”»æ¨¡å¼ */
@media (prefers-reduced-motion: reduce) {
    .language-btn,
    .language-dropdown,
    .language-option {
        transition: none;
    }
}
```

### 5.2 å“åº”å¼è®¾è®¡ä¼˜åŒ–

#### 5.2.1 CSS Gridå’ŒFlexboxå¸ƒå±€
```css
/* ä¸»å®¹å™¨å“åº”å¼å¸ƒå±€ */
.main-container {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* å¹³æ¿å¸ƒå±€ */
@media (max-width: 1024px) {
    .main-container {
        grid-template-columns: 1fr 250px;
        gap: 20px;
    }
}

/* ç§»åŠ¨ç«¯å¸ƒå±€ */
@media (max-width: 768px) {
    .main-container {
        grid-template-columns: 1fr;
        gap: 15px;
        padding: 0 15px;
    }
    
    .sidebar {
        order: -1; /* ä¾§è¾¹æ ç§»åˆ°é¡¶éƒ¨ */
    }
}

/* å¯¼èˆªæ å“åº”å¼ */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    height: 60px;
}

.navbar-nav {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
}

.navbar-nav li {
    margin-left: 20px;
}

/* ç§»åŠ¨ç«¯å¯¼èˆª */
@media (max-width: 768px) {
    .navbar-nav {
        position: fixed;
        top: 60px;
        left: -100%;
        width: 100%;
        height: calc(100vh - 60px);
        background: #fff;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        padding-top: 50px;
        transition: left 0.3s ease;
        z-index: 999;
    }
    
    .navbar-nav.active {
        left: 0;
    }
    
    .navbar-nav li {
        margin: 10px 0;
    }
    
    .navbar-toggle {
        display: block;
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
    }
}

@media (min-width: 769px) {
    .navbar-toggle {
        display: none;
    }
}
```

#### 5.2.2 å›¾ç‰‡å’Œåª’ä½“å“åº”å¼å¤„ç†
```css
/* å“åº”å¼å›¾ç‰‡ */
.responsive-img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* å“åº”å¼iframe */
.responsive-iframe-container {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%; /* 16:9 å®½é«˜æ¯” */
    overflow: hidden;
    border-radius: 8px;
}

.responsive-iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
}

/* è§†é¢‘å“åº”å¼ */
.video-container {
    position: relative;
    width: 100%;
    max-width: 800px;
    margin: 20px auto;
}

.video-container video {
    width: 100%;
    height: auto;
    border-radius: 8px;
}
```

#### 5.2.3 JavaScriptå“åº”å¼å¤„ç†
```javascript
// å“åº”å¼å¤„ç†ç±»
class ResponsiveHandler {
    constructor() {
        this.breakpoints = {
            mobile: 768,
            tablet: 1024,
            desktop: 1200
        };
        this.init();
    }

    init() {
        this.handleResize();
        window.addEventListener('resize', this.debounce(this.handleResize.bind(this), 250));
        window.addEventListener('orientationchange', this.handleOrientationChange.bind(this));
    }

    handleResize() {
        const width = window.innerWidth;
        
        if (width <= this.breakpoints.mobile) {
            this.setMobileLayout();
        } else if (width <= this.breakpoints.tablet) {
            this.setTabletLayout();
        } else {
            this.setDesktopLayout();
        }
        
        this.adjustIframes();
        this.optimizeImages();
    }

    setMobileLayout() {
        document.body.classList.add('mobile-layout');
        document.body.classList.remove('tablet-layout', 'desktop-layout');
        
        // ç§»åŠ¨ç«¯ç‰¹å®šä¼˜åŒ–
        this.collapseSidebar();
        this.enableTouchNavigation();
    }

    setTabletLayout() {
        document.body.classList.add('tablet-layout');
        document.body.classList.remove('mobile-layout', 'desktop-layout');
    }

    setDesktopLayout() {
        document.body.classList.add('desktop-layout');
        document.body.classList.remove('mobile-layout', 'tablet-layout');
        
        // æ¡Œé¢ç«¯ç‰¹å®šä¼˜åŒ–
        this.expandSidebar();
        this.enableKeyboardNavigation();
    }

    adjustIframes() {
        const iframes = document.querySelectorAll('iframe');
        iframes.forEach(iframe => {
            if (!iframe.closest('.responsive-iframe-container')) {
                this.wrapIframe(iframe);
            }
        });
    }

    wrapIframe(iframe) {
        const wrapper = document.createElement('div');
        wrapper.className = 'responsive-iframe-container';
        iframe.parentNode.insertBefore(wrapper, iframe);
        wrapper.appendChild(iframe);
        iframe.className += ' responsive-iframe';
    }

    optimizeImages() {
        const images = document.querySelectorAll('img:not(.optimized)');
        images.forEach(img => {
            img.classList.add('responsive-img', 'optimized');
            
            // æ‡’åŠ è½½å®ç°
            if ('IntersectionObserver' in window) {
                this.lazyLoadImage(img);
            }
        });
    }

    lazyLoadImage(img) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const image = entry.target;
                    if (image.dataset.src) {
                        image.src = image.dataset.src;
                        image.removeAttribute('data-src');
                    }
                    observer.unobserve(image);
                }
            });
        });
        
        observer.observe(img);
    }

    handleOrientationChange() {
        // å»¶è¿Ÿå¤„ç†ï¼Œç­‰å¾…è®¾å¤‡å®Œæˆæ—‹è½¬
        setTimeout(() => {
            this.handleResize();
        }, 100);
    }

    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }

    collapseSidebar() {
        const sidebar = document.querySelector('.sidebar');
        if (sidebar) {
            sidebar.classList.add('collapsed');
        }
    }

    expandSidebar() {
        const sidebar = document.querySelector('.sidebar');
        if (sidebar) {
            sidebar.classList.remove('collapsed');
        }
    }

    enableTouchNavigation() {
        // è§¦æ‘¸å¯¼èˆªä¼˜åŒ–
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.style.minHeight = '44px'; // iOSæ¨èçš„æœ€å°è§¦æ‘¸ç›®æ ‡
            item.style.padding = '12px 16px';
        });
    }

    enableKeyboardNavigation() {
        // é”®ç›˜å¯¼èˆªä¼˜åŒ–
        const focusableElements = document.querySelectorAll(
            'a, button, input, textarea, select, [tabindex]:not([tabindex="-1"])'
        );
        
        focusableElements.forEach(element => {
            element.addEventListener('focus', this.handleFocus);
            element.addEventListener('blur', this.handleBlur);
        });
    }

    handleFocus(event) {
        event.target.classList.add('keyboard-focus');
    }

    handleBlur(event) {
        event.target.classList.remove('keyboard-focus');
    }
}

// åˆå§‹åŒ–å“åº”å¼å¤„ç†
document.addEventListener('DOMContentLoaded', () => {
    new ResponsiveHandler();
});
```

### 5.3 A Dark Roomå†…å®¹ç§»é™¤æ–¹æ¡ˆ

#### 5.3.1 æ–‡ä»¶åˆ é™¤æ¸…å•
```bash
# éœ€è¦åˆ é™¤çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
/docs/adarkroom/                    # æ•´ä¸ªæ¸¸æˆæ–‡ä»¶å¤¹
/docs/_site/adarkroom/              # æ„å»ºç”Ÿæˆçš„æ¸¸æˆæ–‡ä»¶å¤¹
```

#### 5.3.2 ä»£ç å¼•ç”¨æ¸…ç†
éœ€è¦ä»ä»¥ä¸‹æ–‡ä»¶ä¸­ç§»é™¤A Dark Roomç›¸å…³é“¾æ¥ï¼š

1. **_layouts/page.html** (ç¬¬47è¡Œ)
```html
<!-- ç§»é™¤è¿™è¡Œ -->
<a href = "./adarkroom/"> A Dark Room </a>
```

2. **æ£€æŸ¥å…¶ä»–å¯èƒ½çš„å¼•ç”¨**
```bash
# æœç´¢æ‰€æœ‰å¯èƒ½çš„å¼•ç”¨
grep -r "adarkroom\|A Dark Room" docs/ --exclude-dir=adarkroom --exclude-dir=_site
```

#### 5.3.3 æ¸…ç†è„šæœ¬
```bash
#!/bin/bash
# æ¸…ç†A Dark Roomç›¸å…³å†…å®¹çš„è„šæœ¬

echo "å¼€å§‹æ¸…ç†A Dark Roomç›¸å…³å†…å®¹..."

# åˆ é™¤æ¸¸æˆæ–‡ä»¶å¤¹
if [ -d "docs/adarkroom" ]; then
    rm -rf docs/adarkroom
    echo "å·²åˆ é™¤ docs/adarkroom æ–‡ä»¶å¤¹"
fi

if [ -d "docs/_site/adarkroom" ]; then
    rm -rf docs/_site/adarkroom
    echo "å·²åˆ é™¤ docs/_site/adarkroom æ–‡ä»¶å¤¹"
fi

# ä»é¡µé¢æ¨¡æ¿ä¸­ç§»é™¤é“¾æ¥
sed -i '' '/adarkroom/d' docs/_layouts/page.html
echo "å·²ä»é¡µé¢æ¨¡æ¿ä¸­ç§»é™¤A Dark Roomé“¾æ¥"

# æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å…¶ä»–å¼•ç”¨
echo "æ£€æŸ¥å‰©ä½™å¼•ç”¨..."
grep -r "adarkroom\|A Dark Room" docs/ --exclude-dir=_site || echo "æœªå‘ç°å…¶ä»–å¼•ç”¨"

echo "æ¸…ç†å®Œæˆï¼"
```

### 5.4 å…¶ä»–é¡¹ç›®é—®é¢˜åˆ†æä¸ä¼˜åŒ–

#### 5.4.1 æ€§èƒ½ä¼˜åŒ–

**CSSä¼˜åŒ–**
```css
/* å…³é”®CSSå†…è” */
.critical-css {
    /* é¦–å±å¿…éœ€çš„æ ·å¼ */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
    color: #333;
}

/* éå…³é”®CSSå»¶è¿ŸåŠ è½½ */
.non-critical {
    /* éé¦–å±æ ·å¼ */
}
```

**JavaScriptä¼˜åŒ–**
```javascript
// ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
const loadModule = async (moduleName) => {
    try {
        const module = await import(`./modules/${moduleName}.js`);
        return module.default;
    } catch (error) {
        console.error(`Failed to load module: ${moduleName}`, error);
    }
};

// é˜²æŠ–å’ŒèŠ‚æµ
const debounce = (func, delay) => {
    let timeoutId;
    return (...args) => {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => func.apply(null, args), delay);
    };
};

const throttle = (func, limit) => {
    let inThrottle;
    return function() {
        const args = arguments;
        const context = this;
        if (!inThrottle) {
            func.apply(context, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    }
};
```

#### 5.4.2 SEOä¼˜åŒ–
```html
<!-- æ”¹è¿›çš„metaæ ‡ç­¾ -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="{{ page.description | default: site.description }}">
<meta name="keywords" content="{{ page.tags | join: ', ' }}">
<meta name="author" content="{{ site.author }}">

<!-- Open Graphæ ‡ç­¾ -->
<meta property="og:title" content="{{ page.title | default: site.title }}">
<meta property="og:description" content="{{ page.description | default: site.description }}">
<meta property="og:image" content="{{ page.image | default: site.default_image }}">
<meta property="og:url" content="{{ page.url | absolute_url }}">
<meta property="og:type" content="article">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page.title | default: site.title }}">
<meta name="twitter:description" content="{{ page.description | default: site.description }}">
<meta name="twitter:image" content="{{ page.image | default: site.default_image }}">

<!-- ç»“æ„åŒ–æ•°æ® -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ page.title }}",
  "description": "{{ page.description }}",
  "author": {
    "@type": "Person",
    "name": "{{ site.author }}"
  },
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
  "image": "{{ page.image | default: site.default_image }}",
  "url": "{{ page.url | absolute_url }}"
}
</script>
```

#### 5.4.3 æ— éšœç¢æ€§æ”¹è¿›
```html
<!-- æ”¹è¿›çš„å¯¼èˆªç»“æ„ -->
<nav role="navigation" aria-label="ä¸»å¯¼èˆª">
    <ul class="nav-list">
        <li><a href="/" aria-current="page">é¦–é¡µ</a></li>
        <li><a href="/about">å…³äº</a></li>
        <li><a href="/archive">å½’æ¡£</a></li>
    </ul>
</nav>

<!-- è·³è½¬é“¾æ¥ -->
<a href="#main-content" class="skip-link">è·³è½¬åˆ°ä¸»å†…å®¹</a>

<!-- æ”¹è¿›çš„è¡¨å• -->
<form role="search" aria-label="ç«™å†…æœç´¢">
    <label for="search-input" class="sr-only">æœç´¢å…³é”®è¯</label>
    <input type="search" id="search-input" placeholder="æœç´¢æ–‡ç« ..." aria-describedby="search-help">
    <div id="search-help" class="sr-only">è¾“å…¥å…³é”®è¯æœç´¢ç«™å†…æ–‡ç« </div>
    <button type="submit" aria-label="æ‰§è¡Œæœç´¢">
        <i class="fa fa-search" aria-hidden="true"></i>
    </button>
</form>
```

```css
/* æ— éšœç¢æ€§æ ·å¼ */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: #000;
    color: #fff;
    padding: 8px;
    text-decoration: none;
    z-index: 1000;
}

.skip-link:focus {
    top: 6px;
}

/* ç„¦ç‚¹æŒ‡ç¤ºå™¨ */
:focus {
    outline: 2px solid #005fcc;
    outline-offset: 2px;
}

/* é«˜å¯¹æ¯”åº¦æ¨¡å¼ */
@media (prefers-contrast: high) {
    :root {
        --text-color: #000;
        --bg-color: #fff;
        --link-color: #0000ee;
        --visited-color: #551a8b;
    }
}

/* å‡å°‘åŠ¨ç”» */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
```

#### 5.4.4 é”™è¯¯å¤„ç†å’Œç›‘æ§
```javascript
// å…¨å±€é”™è¯¯å¤„ç†
class ErrorHandler {
    constructor() {
        this.init();
    }

    init() {
        // JavaScripté”™è¯¯æ•è·
        window.addEventListener('error', this.handleError.bind(this));
        window.addEventListener('unhandledrejection', this.handlePromiseRejection.bind(this));
        
        // èµ„æºåŠ è½½é”™è¯¯
        document.addEventListener('error', this.handleResourceError.bind(this), true);
    }

    handleError(event) {
        console.error('JavaScript Error:', {
            message: event.message,
            filename: event.filename,
            lineno: event.lineno,
            colno: event.colno,
            error: event.error
        });
        
        this.showUserFriendlyError('é¡µé¢å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚');
    }

    handlePromiseRejection(event) {
        console.error('Unhandled Promise Rejection:', event.reason);
        this.showUserFriendlyError('æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚');
    }

    handleResourceError(event) {
        const target = event.target;
        if (target.tagName === 'IMG') {
            this.handleImageError(target);
        } else if (target.tagName === 'SCRIPT') {
            this.handleScriptError(target);
        } else if (target.tagName === 'LINK') {
            this.handleStyleError(target);
        }
    }

    handleImageError(img) {
        // å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†
        img.src = '/img/placeholder.png';
        img.alt = 'å›¾ç‰‡åŠ è½½å¤±è´¥';
    }

    handleScriptError(script) {
        // è„šæœ¬åŠ è½½å¤±è´¥å¤„ç†
        console.warn('Script failed to load:', script.src);
    }

    handleStyleError(link) {
        // æ ·å¼è¡¨åŠ è½½å¤±è´¥å¤„ç†
        console.warn('Stylesheet failed to load:', link.href);
    }

    showUserFriendlyError(message) {
        // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
        const toast = document.createElement('div');
        toast.className = 'error-toast';
        toast.textContent = message;
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.remove();
        }, 5000);
    }
}

// åˆå§‹åŒ–é”™è¯¯å¤„ç†
new ErrorHandler();
```

## 6. å®æ–½è®¡åˆ’

### 6.1 ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¸…ç†å’Œå‡†å¤‡ï¼ˆ1-2å¤©ï¼‰
1. åˆ é™¤A Dark Roomç›¸å…³æ–‡ä»¶å’Œé“¾æ¥
2. å¤‡ä»½ç°æœ‰é…ç½®å’Œé‡è¦æ–‡ä»¶
3. æ›´æ–°é¡¹ç›®ä¾èµ–å’Œæ„å»ºå·¥å…·

### 6.2 ç¬¬äºŒé˜¶æ®µï¼šå¤šè¯­è¨€åŠŸèƒ½å®ç°ï¼ˆ3-4å¤©ï¼‰
1. å®ç°IPåœ°ç†ä½ç½®æ£€æµ‹åŠŸèƒ½
2. é‡æ–°è®¾è®¡è¯­è¨€é€‰æ‹©å™¨UI
3. ä¼˜åŒ–è¯­è¨€åˆ‡æ¢é€»è¾‘å’Œç”¨æˆ·ä½“éªŒ
4. æµ‹è¯•å„ç§è¯­è¨€å’Œåœ°åŒºçš„å…¼å®¹æ€§

### 6.3 ç¬¬ä¸‰é˜¶æ®µï¼šå“åº”å¼è®¾è®¡ä¼˜åŒ–ï¼ˆ3-4å¤©ï¼‰
1. é‡æ„CSSå¸ƒå±€ç³»ç»Ÿ
2. å®ç°JavaScriptå“åº”å¼å¤„ç†
3. ä¼˜åŒ–ç§»åŠ¨ç«¯äº¤äº’ä½“éªŒ
4. æµ‹è¯•å„ç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸

### 6.4 ç¬¬å››é˜¶æ®µï¼šæ€§èƒ½å’Œè´¨é‡ä¼˜åŒ–ï¼ˆ2-3å¤©ï¼‰
1. å®æ–½æ€§èƒ½ä¼˜åŒ–æªæ–½
2. æ”¹è¿›SEOå’Œæ— éšœç¢æ€§
3. æ·»åŠ é”™è¯¯å¤„ç†å’Œç›‘æ§
4. å…¨é¢æµ‹è¯•å’Œè°ƒè¯•

### 6.5 ç¬¬äº”é˜¶æ®µï¼šéƒ¨ç½²å’ŒéªŒè¯ï¼ˆ1å¤©ï¼‰
1. éƒ¨ç½²åˆ°GitHub Pages
2. éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
3. æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–è°ƒæ•´
4. æ–‡æ¡£æ›´æ–°å’Œé¡¹ç›®æ€»ç»“

## 7. æµ‹è¯•ç­–ç•¥

### 7.1 åŠŸèƒ½æµ‹è¯•
- å¤šè¯­è¨€åˆ‡æ¢åŠŸèƒ½æµ‹è¯•
- å“åº”å¼å¸ƒå±€æµ‹è¯•
- æœç´¢åŠŸèƒ½æµ‹è¯•
- å¯¼èˆªå’Œé“¾æ¥æµ‹è¯•

### 7.2 å…¼å®¹æ€§æµ‹è¯•
- æµè§ˆå™¨å…¼å®¹æ€§ï¼ˆChrome, Firefox, Safari, Edgeï¼‰
- è®¾å¤‡å…¼å®¹æ€§ï¼ˆæ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºï¼‰
- æ“ä½œç³»ç»Ÿå…¼å®¹æ€§ï¼ˆWindows, macOS, iOS, Androidï¼‰

### 7.3 æ€§èƒ½æµ‹è¯•
- é¡µé¢åŠ è½½é€Ÿåº¦æµ‹è¯•
- èµ„æºä¼˜åŒ–æ•ˆæœæµ‹è¯•
- ç§»åŠ¨ç«¯æ€§èƒ½æµ‹è¯•

### 7.4 æ— éšœç¢æ€§æµ‹è¯•
- é”®ç›˜å¯¼èˆªæµ‹è¯•
- å±å¹•é˜…è¯»å™¨å…¼å®¹æ€§æµ‹è¯•
- è‰²å½©å¯¹æ¯”åº¦æµ‹è¯•

## 8. ç»´æŠ¤å’Œç›‘æ§

### 8.1 å®šæœŸç»´æŠ¤
- ä¾èµ–åŒ…æ›´æ–°
- å®‰å…¨è¡¥ä¸åº”ç”¨
- æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
- å†…å®¹å¤‡ä»½å’Œæ¢å¤

### 8.2 ç”¨æˆ·åé¦ˆ
- å»ºç«‹ç”¨æˆ·åé¦ˆæ¸ é“
- å®šæœŸæ”¶é›†å’Œåˆ†æç”¨æˆ·ä½“éªŒæ•°æ®
- æ ¹æ®åé¦ˆæŒç»­æ”¹è¿›åŠŸèƒ½

### 8.3 æŠ€æœ¯å€ºåŠ¡ç®¡ç†
- ä»£ç è´¨é‡ç›‘æ§
- æŠ€æœ¯æ ˆå‡çº§è®¡åˆ’
- é‡æ„å’Œä¼˜åŒ–è®¡åˆ’

é€šè¿‡ä»¥ä¸Šç»¼åˆä¼˜åŒ–æ–¹æ¡ˆçš„å®æ–½ï¼ŒKannmuSiteåšå®¢å°†è·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€æ›´å¼ºçš„å¤šè¯­è¨€æ”¯æŒã€æ›´ä¼˜çš„å“åº”å¼è®¾è®¡ï¼Œä»¥åŠæ›´é«˜çš„ä»£ç è´¨é‡å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚